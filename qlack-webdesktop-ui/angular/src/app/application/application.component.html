<!-- img icon stays at init application position-->
<div (click)="zIndexPlusOne()" (dblclick)="applicationMinimized()" *ngIf="!!iconImageSrc &&  isActive"
     [class.applicationOnAppBar]="!isMinimized" [class.applicationOnAppBarMinimized]="isMinimized">
  <img [src]="safeIconImageSrc" default='assets/img/icon.png' alt="application icon">
</div>

<div (cdkDragEnded)="dragEnd($event)" (cdkDragMoved)="dragMoved($event)" (cdkDragReleased)="dragReleased($event)"
     (cdkDragStarted)="dragStart($event)" *ngIf="isActive" [cdkDragDisabled]="isSmallScreen || !isDraggable"
     [cdkDragFreeDragPosition]="applicationPosition"
     [class.applicationMinimized]="isMinimized && !isSmallScreen" [style.top]="yPosition" [style.left]="xPosition"
     [style.z-index]="zIndex" cdkDrag
     cdkDragBoundary=".widget-boundary" class="application">

  <div (click)="applicationClicked()" *ngIf="isMinimized && !isSmallScreen" class="applicationAsIcon">
    <div *ngIf="!(!!iconImageSrc)">{{ applicationName + '.title' | translate  }}</div>
  </div>

  <div *ngIf="!isMinimized || isSmallScreen">
    <div (click)="zIndexPlusOne()" cdkDragHandle class="header">
      <img *ngIf="!!iconSmallSrc" [src]="safeSmallIconImageSrc" default='assets/img/icon_small.png' class="image" alt="application small icon">

      <div *ngIf="showTitle" class="title"
           style.left="{{!(!!iconImageSrc) && '5px'}}">{{ applicationName
      + '.title' | translate  }}</div>

      <div class="iconsContainer">
        <em (click)="applicationMinimized()" *ngIf="isMinimizable" class="material-icons headerIcon"
            matTooltip="minimize">
          remove
        </em>
        <em (click)="applicationMaximized($event)" *ngIf="isMaximizable && !isMaximized"
            class="material-icons headerIcon" matTooltip="fullscreen">
          fullscreen
        </em>
        <em (click)="applicationMaximized($event)" *ngIf="isMaximizable && isMaximized"
            class="material-icons headerIcon" matTooltip="fullscreen exit">
          fullscreen_exit
        </em>

        <em (click)="close()" *ngIf="isClosable" class="material-icons headerIcon"
           matTooltip="close">
          cancel
        </em>
      </div>
    </div>
  </div>
  <div  [class.displayContent]="isMinimized"
       [class.fullScreenSize]="isMaximized && !isSmallScreen"
        [style.height.px]="height"
       [style.min-height.px]="minHeight" [style.min-width.px]="minWidth" [style.width.px]="width" class="content"
        mwlResizable
        [enableGhostResize]="false"
        (resizeEnd)="onResizeEnd($event)" (resizeStart)="onResizeStart($event)" (resizing)="onResize($event)">
    <div
        class="resize-handle-bottom"
        mwlResizeHandle
        [resizeEdges]="{ bottom: isResizable }"
    ></div>
    <div
        class="resize-handle-right"
        mwlResizeHandle
        [resizeEdges]="{ right: isResizable }"
    ></div>
    <div  [style.min-height.px]="minHeight" [style.min-width.px]="minWidth" class="iframe-container" >
      <iframe [src]="safeAppUrl" title="application" [style.display]="displayIframe ? 'block' : 'none'"></iframe>
    </div>
  </div>


</div>
